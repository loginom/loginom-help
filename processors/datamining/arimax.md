# ARIMAX

## Описание

Модель ARIMAX это модель прогнозирования авторегрессии проинтегрированного скользящего среднего с учетом внешнего фактора.

ARIMA—модели позволяют моделировать интегрированные или разностно—стационарные временные ряды (DS—ряды, diference stationary).

В статистике и эконометрике, и в частности в анализе временных рядов , модель авторегрессионной интегрированной скользящей средней (ARIMA)является обобщением модели авторегрессионной скользящей средней (ARMA). Обе эти модели привязаны к данным временных рядов либо для лучшего понимания данных, либо для прогнозирования будущих точек в серии. Модели ARIMA применяются в некоторых случаях, когда данные свидетельствуют о не стационарности , когда один или несколько раз для устранения не стационарности может применяться один шаг разложения (соответствующий «интегрированной» части модели).

AR—часть ARIMA указывает на то, что изменяющаяся переменная, представляющая интерес, регрессируется по собственным запаздывающим (т.е. предшествующим) значениям. Часть MA указывает, что ошибка регрессии на самом деле представляет собой линейную комбинацию условий ошибки, значения которых происходили одновременно и в разное время в прошлом. I (для «интегрированного») указывает, что значения данных были заменены разницей между их значениями и предыдущими значениями (и этот процесс разложения мог быть выполнен более одного раза). Цель каждой из этих функций — сделать модель максимально подходящей для данных.

Несезонные модели ARIMA обычно обозначаются как ARIMA ( p , d , q ), где параметры p , d и q — целые неотрицательные числа, p — порядок (количество временных отставаний) модели авторегрессии , d — степень разности (количество раз, когда данные были вычтены прошлыми значениями), а q — порядок модели скользящего среднего . Сезонные модели ARIMA обычно обозначаются ARIMA ( p , d , q ) ( P , D , Q ) m , где m относится к числу периодов в каждом сезоне, а верхние регистры P , D , Q относятся к авторегрессии, разности, и скользящие средние для сезонной части модели ARIMA.

Когда два из трех членов являются нулями, модель может ссылаться на ненулевой параметр, отбрасывая «AR», «I» или «MA» из аббревиатуры, описывающей модель. Например, ARIMA (1,0,0) является AR (1), ARIMA (0,1,0) является I (1), а ARIMA (0,0,1) является MA (1).

Модель ARIMAX(p,d, q)  является развитием модели ARIMA(p,d, q) и описывается уравнением
Z(t) = AR(p) + a1X1(t) + ⋯ + asXs(t)   Здесь a1,..., as— коэффициенты внешних факторов X1(t),…, Xs(t)  . В данной модели чаще всего процесс Z(t) является результатом модели MA(q), то есть отфильтрованными значениями исходного процесса. Далее для прогнозирования Z(t)  используется модель авторегрессии, в которой введены дополнительные регрессоры внешних факторов X1(t),…, Xs(t)

Для получения результирующих наборов требуется редварительное обучение обработчика.

## Входы и выходы компонента

 ![](data:image/*;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAQCAYAAAAvf+5AAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA+SURBVChTY6A6YITSDLPmr/8PZaKAtMRAsBoWMA8KAn0doCwIWL/5AJTFwMAEpQmCUYV4AdEKiY5CagMGBgBzzQsZg8PS0gAAAABJRU5ErkJggg==)
**Входные данные:**

Поле, соответствующее временному ряду, должно иметь тип использования &quot;Выходное&quot;, тип данных &quot;Вещественный&quot;  и вид данных &quot;Непрерывный&quot;. Такое поле должно быть ровно одно;

Поля, соответствующие дополнительным входным факторам, должны иметь тип использования &quot;Входное&quot;. Ограничения на типы и виды данных не накладываются. Данные поля могут отсутствовать или присутствовать в любом количестве.

**Выходные данные:**

Основной выходной порт содержит набор с именем PredictedData и меткой Выход модели. Заполняется следующими вновь создаваемыми полями:

- Имя\_поля|Прогноз — прогнозируемые значения, как для присутствующих в наборе отсчетов временного ряда, так и для &quot;будущих значений&quot;;
- Имя\_поля|Ошибка аппроксимации — остатки модели, только для фактических данных. Поле присутствует, если установлен флаг &quot;Рассчитать ошибку аппроксимации&quot;;
- Имя\_поля|Нижняя граница, Имя\_поля|Верхняя граница — границы доверительного интервала. Поля присутствуют, если установлен флаг &quot;Рассчитать доверительный интервал&quot;.

Дополнительный выходной порт содержит набор с именем ModelCoefficients и меткой Коэффициенты модели. Заполняется значениями коэффициентов рассчитанной модели, для каждого из которых также рассчитываются оценка стандартного отклонения, t—статистика и ее p—значение.

Порт выходных переменных имеет имя Summary и метку Сводка. Содержит следующие показатели:

- Всего примеров (TotalSamples)
- Всего отобранных примеров (TotalSelectedSamples)
- Примеров в обучающем множестве (TrainSamples)
- Среднеквадратическая ошибка на обучающем множестве (TrainRMSError)
- Средняя абсолютная ошибка на обучающем множестве (TrainAvgError)
- Средняя относительная ошибка на обучающем множестве (TrainAvgRelError)
- Информационный критерий Акаике (AIC)
- Информационный критерий Акаике скорректированный (AICc)
- Информационный критерий Байеса (BIC)
- Коэффициент детерминации (R2)
- Скорректированный коэффициент детерминации (R2adj)
- Число степеней свободы модели (DF)
- Число степеней свободы остатков (DFres)

## Мастер настройки

### Структура модели ARIMAX

- **Определить структуру автоматически.**
Автоматический подбор модели следует приводимой ниже процедуре:
Определяются порядки интегрирования
DS (для сезонной компоненты) — на основе Canova—Hansen теста
D (для несезонной компоненты) — на основе KPSS теста
Если D + DS ≤ 1 константа добавляется в модель.
Начальная модель определяется как лучшая из:
ARIMA(2,D,2) при отсутствии сезонности и ARIMA(2,D,2)(1,DS,1) при ее наличии;
ARIMA(0,D,0) при отсутствии сезонности и ARIMA(0,D,0)(0,DS,0) при ее наличии. Если в модель не включена константа, а также отсутствуют внешние факторы, то этот вариант не рассчитывается (иначе в нем отсутствовали бы подбираемые параметры);
ARIMA(1,D,0) при отсутствии сезонности и ARIMA(1,D,0)(1,DS,0) при ее наличии;
ARIMA(0,D,1) при отсутствии сезонности и ARIMA(0,D,1)(0,DS,1) при ее наличии;
На каждом шаге проверяются варианты:
Изменение авторегрессии, скользящего среднего, авторегрессии  и скользящего среднего  для сезонной части на ±1 по отдельности
Изменение авторегрессии и скользящего среднего на ±1 одновременно
Изменение авторегрессии  и скользящего среднего  для сезонной части на ±1 одновременно
Ограничения на структуру модели: авторегрессии \&lt; 6, скользящего среднего \&lt; 6, авторегрессии для сезонной части \&lt; 3, скользящего среднего  для сезонной части \&lt; 3.
При авто подборе в качестве модели—кандидата выбирается такой вариант, который минимизирует AIC. Если AIC модели—кандидата меньше AIC текущей выбранной модели, модель—кандидат становится новой выбранной моделью и процесс продолжается. Иначе процедура завершается.

- **Порядок AR части.** Параметр доступен при отключенном значении: Определить структуру автоматически. Устанавливается значение целого типа от 0 и выше.
- **Порядок интегрирования.** Параметр доступен при отключенном значении: Определить структуру автоматически. Устанавливается значение целого типа от 0 и выше.
- **Порядок MA части.** Параметр доступен при отключенном значении: Определить структуру автоматически. Устанавливается значение целого типа от 0 и выше.
- **Включить расчет сезонности.**
- **Порядок сезонной AR части.** Параметр доступен при отключенном значении: Определить структуру автоматически и включенном значении: Включить расчет сезонности. Устанавливается значение целого типа от 0 и выше.
- **Порядок сезонного  интегрирования.** Параметр доступен при отключенном значении: Определить структуру автоматически и включенном значении: Включить расчет сезонности. Устанавливается значение целого типа от 0 и выше.
- **Порядок сезонной MA части.** Параметр доступен при отключенном значении: Определить структуру автоматически и включенном значении: Включить расчет сезонности. Устанавливается значение целого типа от 0 и выше.
- **Период сезонной составляющей.** Параметр доступен включенном значении: Включить расчет сезонности. Устанавливается положительное значение целого типа.
- **Включить константу в модель.** Параметр доступен при отключенном значении: Определить структуру автоматически.

### Прогнозирование временных рядов

- **Горизонт прогноза.** Количество отсчетов, которые будут спрогнозированы в конце временного ряда. Устанавливается положительное значение целого типа.
- **Рассчитать ошибку аппроксимации.**
- **Рассчитать доверительный интервал.**
- **Доверительный интервал прогноза в %.** Параметр доступен при включенном значении:Рассчитать доверительный интервал. Устанавливается значение целого типа в интервале от 0 до 100.