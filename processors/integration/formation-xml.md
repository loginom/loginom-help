# ![](../../images/icons/components/data-to-xml_default.svg) Формирование XML

Компонент предназначен для преобразования таблицы в XML.

> **Важно:** Для работы узла требуется предварительно создать [подключение к XSD-схеме](../../integration/connections/list/schemes.md) и связать его с входным портом *Подключение к источнику XSD-схемы*. Подключение происходит аналогично [подключению с БД](../../quick-start/database.md).

## Порты

### Вход

* ![](../../images/icons/ports/input_connection_inactive.svg) Подключение к источнику XSD-схемы (обязательный порт) — связь с узлом [подключения набора XSD-схем](../../integration/connections/list/schemes.md).
* ![](../../images/icons/ports/input_table_inactive.svg) Источник данных — таблица данных, подлежащая преобразованию.
* ![](../../images/icons/ports/optional_input_variable_inactive.svg) [Управляющие переменные](../../scenario/variables/control-variables.md) (необязательный порт) — переменными порта можно задать значения параметров мастера настройки. Для отображения порта необходимо в контекстном меню узла выбрать пункт "Показать порт управляющих переменных".

## Мастер настройки

### Шаг 1. Сопоставление полей для формирования XML

* **Подключение** — состояние подключения к XSD-схеме.
* **Корневой элемент** — выбор корневого элемента XSD-схемы, структура которого описывает результирующий XML.
* **Связывание объектов** — представлены списки полей входной таблицы и элементов схемы результирующего XML. Необходимо проставить связи между полями таблицы и элементами схемы XML. Сделать это можно несколькими способами:
  * Методом *Drag-and-drop* — перетащить метку поля из левого списка полей на элемент схемы XML. Типы данных поля таблицы и связываемого элемента должны совпадать.
  * В правой таблице выбрать нужный элемент схемы XML и в столбце *Связанные поля* выбрать из выпадающего списка метку поля входной таблицы. Фильтр выпадающего списка в состоянии ![](../../media/app/icons/toolbar-18/linkedfield-filter.svg.svg) оставляет только те поля, которые еще не связаны с какими-либо элементами, а в состоянии ![](../../media/app/icons/toolbar-18/method-draw-image.svg) предоставляет к выбору все поля.
  * использовать кнопку ![](../../images/icons/toolbar-controls/auto-connect_default.svg) *Связать все автоматически*, при этом происходит автоматическое связывание, исходя из значений меток и типов данных полей входной таблицы и элементов схемы XML.

> **Примечание**: Если связь между полем и объектом была установлена неправильно, ее можно удалить. Для этого нужно выбрать метку и нажать на кнопку ![](../../images/icons/link-grid/remove-link_hover.svg) на линии связи. При необходимости удаления всех связей используется кнопка ![](../../images/icons/toolbar-controls/remove-all-links_default.svg) *Удалить все связи*.

* **Наличие временной зоны** — определяет указывается ли информация о [часовом поясе](https://ru.wikipedia.org/wiki/Список_часовых_поясов_по_странам) в рамках стандарта [ISO_8601](https://ru.wikipedia.org/wiki/ISO_8601) в элементах XML, содержащих дату и/или время. Возможные значения:
  * Не указывать.
  * Не указывать для даты — не указывать временную зону для элементов типа [date](https://www.w3.org/TR/xmlschema-2/#date).
  * Указывать всегда.

### Шаг 2. Параметры формирования XML

* **Идентификация XML-документа** — выбор одного из вариантов наполнения XML данными входной таблицы:
  * **Весь набор данных (используется по умолчанию)**  — все записи входной таблицы войдут в результирующий XML. В этом случае выходной набор данных будет содержать единственную запись.
  * **По строчкам** — для каждой записи входной таблицы сформируется XML. В этом случае выходной набор данных будет содержать такое же количество записей, что и во входной таблице.
  * **По идентификатору** — записи входной таблицы будут сгруппированы по указанному идентификатору. Для каждой группы записей сформируется XML. В этом случае выходной набор данных будет содержать количество записей равное количеству уникальных значений идентификатора.
* **Настройка форматирования** — область включает следующие флаги:
  * **Добавлять отступы и переводы строк** — в результирующем XML каждой строке будет соответствовать один элемент. Отступы строк задаются в соответствии с иерархией элементов.
  * **Экранировать табуляции и переводы строк в атрибутах** — замена в атрибутах результирующего XML символов табуляции на обозначение *`&#x9;`* и символа перевода строк на *`&#xA;`*
  * **Экранировать одинарные и двойные кавычки** — замена в результирующем XML одинарных кавычек на обозначение *`&apos;`* и двойных на *`&quot;`*.