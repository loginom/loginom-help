# ![](../../../images/icons/components/python_default.svg) Python

## Описание

Узел создает новый набор данных с заданным составом и параметрами полей и заполняет его данными в ходе выполнения кода Python. Для заполнения выходного набора в коде возможно использование данных входных портов.
Состав и параметры полей выходного набора могут задаваться как в мастере настройки узла, так и из кода Python.

### Вход

* ![](../../../images/icons/app/node/ports/outputs/table_inactive.svg) Входной источник данных (таблица данных), необязательный;
* ![](../../../images/icons/app/node/ports/add/add_inactive_default.svg) Добавить еще один порт – создает новый порт Входной источник данных[N], где N – порядковый номер порта;
* ![](../../../images/icons/app/node/ports/inputs-optional/variable_inactive.svg) Входные переменные (переменные), необязательный.

### Выход

* ![](../../../images/icons/app/node/ports/outputs/table_inactive.svg) Выходной набор данных (таблица данных).

## Мастер настройки

Последовательно выполняются следующие этапы настройки:

* Настройка столбцов выходной таблицы Python;
* Python – ввод кода и предварительный просмотр результатов.

### Настройка столбцов выходной таблицы

Столбцы выходного набора можно задать как на странице *Настройка столбцов выходной таблицы Python* мастера, так и динамически, в ходе исполнения кода Python. При установке флага *Разрешить формировать выходные столбцы из кода* доступно динамическое создание, изменение и удаление выходных столбцов.

### Python

Страница *Python* содержит редактор исполняемого узлом кода. По кнопке [Предпросмотр…](../../../visualization/preview/preview.md) в отдельном окне выводятся до 100 первых строк результирующего набора данных и [консоль отладки кода](./console.md).
В параметре *Тайм-аут ожидания (мс)* устанавливается время ожидания выполнения кода Python. Если время тайм-аута истекло, выполнение узла завершается с соответствующей ошибкой.

> **Примечание:** При нажатии на кнопку *Предпросмотра* активируются все входные порты. При успешном завершении активации открывается окно *Предпросмотра*.

Поддерживается [импорт внешних модулей Python](./external-modules.md).

См. также: [Горячие клавиши редактора кода](./hotkeys.md)

## Доступ из кода Python к данным портов и другим встроенным объектам

Для доступа к данным портов и другим встроенным объектам в контексте выполнения кода предусмотрены следующие объекты:

* [Входные наборы данных](./input-tables.md) (`InputTables`, `InputTable`);
* [Входные переменные](./input-variables.md) (`InputVariables`);
* [Выходной набор данных](./output-table.md) (`OutputTable`);
* [Необходимые перечисления](./enum.md) (`DataType`, `DataKind`, `UsageType`).

Вышеуказанные объекты импортируются из встроенного модуля `"builtin_data"`. По умолчанию в текст исполняемого узлом кода добавляется строка импорта этих объектов.

## Обработка ошибок

При вызове окна *Предпросмотра* или выполнении узла выводится сообщение об обнаруженных синтаксических ошибках и ошибках хода выполнения с указанием позиции кода, содержащего ошибку.

## Особенности использования и ограничения

* По умолчанию выполнение узлов *Python* в серверных версиях запрещено в разделе [Администрирование->Параметры->Параметры компонента Python](../../../admin/parameters.md).
* В параметре *Путь библиотеки* раздела [Администрирование->Параметры->Параметры компонента Python](../../../admin/parameters.md) указывается путь к библиотеке python3x.dll, где x – номер минорной версии. Если путь не задан, то осуществляется ее автоматический поиск в переменной окружения `PYTHONHOME` и реестре.
* Минимальная поддерживаемая версия Python - 3.4.
* Максимальная протестированная версия Python - 3.9.
* Python из дистрибутива Anaconda не поддерживается.
* Не поддерживаются модули пакета [multiprocessing](https://docs.python.org/3/library/multiprocessing.html).
* Запрещено создание GUI-интерфейса из кода Python.
* Запрещено оставлять незавершенные фоновые потоки. Библиотека Python не будет выгружаться операционной системой, что в итоге приведет к завершению приложения.
* В случае критических ошибок python3*.dll может аварийно завершить приложение. Рекомендуется использовать предварительно отлаженный код Python.
* Одновременно может выполняться только один узел *Python*.
* Остановить выполнение узла *Python* можно только между инструкциями кода, внешние вызовы Python не прерываются.
