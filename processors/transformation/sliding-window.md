# ![Скользящее окно](../../images/icons/vendors/slidingwindow.svg) Скользящее окно

Обработка данных методом скользящего окна применяется при предварительной обработке данных в задачах прогнозирования, когда на вход анализатора (например, нейронной сети) требуется подавать значения нескольких смежных отсчетов исходного набора данных. Термин [скользящее окно](https://wiki.loginom.ru/articles/windowing-method.html) отражает сущность обработки — выделяется некоторый непрерывный отрезок данных, называемый окном, а окно, в свою очередь, перемещается, "скользит" по всему исходному набору данных.

В результате будет получен набор данных, где в одном поле будет содержаться значение, соответствующее текущему отсчету (оно будет иметь то же имя, что и в исходном наборе), а слева и справа от него будут расположены поля со значениями, смещенными от текущего отсчета в прошлое и в будущее соответственно.

Следовательно, обработка методом скользящего окна имеет два параметра:

* **Глубина истории** — количество отсчетов в "прошлое";
* **Горизонт прогноза** — количество отсчетов в "будущее".

Необходимо отметить, что для граничных положений окна (конец и начало исходной выборки) будут формироваться неполные записи: в начале исходной выборки будут формироваться пустые значения для "прошлых" отсчетов, а в конце — для "будущих". В зависимости от конкретной ситуации пользователь может включать такие неполные записи в результирующую выборку или исключать их.

%spoiler%Пример:%spoiler%

Исходная таблица:

| Дата | Продажи, шт. |
| :--- | -----------: |
| 01.09.2011 | 45 |
| 01.10.2011 | 82 |
| 01.11.2011 | 120 |
| 01.12.2011 | 192 |
| 01.01.2012 | 229 |
| 01.02.2012 | 161 |

Для поля `Продажи, шт.` настроим параметр *Глубина истории* равным двум, а параметр *Горизонт прогноза* — равным единице.

Результирующая таблица:

| Дата | Продажи, шт.[-2] | Продажи, шт.[-1] | Продажи, шт. | Продажи, шт.[+1] |
| :--- | ---------------: | ---------------: | -----------: | ---------------: |
| | | | | 45 |
| 01.09.2011 | | | 45 | 82 |
| 01.10.2011 | | 45 | 82 | 120 |
| 01.11.2011 | 45 | 82 | 120 | 192 |
| 01.12.2011 | 82 | 120 | 192 | 229 |
| 01.01.2012 | 120 | 192 | 229 | 161 |
| 01.02.2012 | 192 | 229 | 161 | |
| | 229 | 161 | | |
| | 161 | | | |

%/spoiler%

## Порты

### Вход

* ![Входной источник данных](../../images/icons/ports/input_table_inactive.svg) **Входной источник данных** — порт для подключения входного набора данных.

### Выход

* ![Выходной источник данных](../../images/icons/ports/input_table_inactive.svg) **Выходной набор данных** — на порт выводится таблица с набором данных дополненным смещенными полями.

## Мастер настройки

Окно мастера настройки содержит список полей входной таблицы, для каждого поля имеются настраиваемые параметры:

* **Глубина истории** — количество значений из предыдущих записей, для которых создаются новые поля в выходном наборе данных;
* **Горизонт прогноза** — количество значений из последующих записей, для которых создаются новые поля в выходном наборе данных.

Параметр *Способ обработки неполных записей* предоставляет следующие методы:

* **Оставлять неполные записи** — записи, содержащие значения `NULL`, будут сохранены;
* **Удалять добавленные неполные записи** — записи, содержащие значения `NULL`, будут удалены;
* **Удалять все неполные записи** — добавленные обработчиком записи будут удалены, если в полях для смещенных значений содержится хотя бы одна пустая ячейка.
