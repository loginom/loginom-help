# ![Группировка](../../images/icons/vendors/groupdata.svg) Группировка

Группировка выполняет действия над набором данных аналогичные действиям SQL-запроса с применением предложения `GROUP BY`. Обработчик позволяет объединять записи избранных полей в группы, а для оставшихся полей вычислять статистические показатели (сумму, среднее, минимум и т.д.). Для каждой группы возвращается одна строка. Статистические показатели (или [функции агрегации](../func/aggregation-functions.md)) при этом вычисляются для каждой группы, а не для всего набора в целом.

%spoiler%Пример:%spoiler%

Исходная таблица:

| Дата | Товар | Вес, кг |
| -------- | ---------- | ------------ |
| 12.07.2015 | Яблоки | 20 |
| 12.07.2015 | Яблоки | 18 |
| 12.07.2015 | Помидоры | 24 |
| 13.07.2015 | Помидоры | 22 |
| 13.07.2015 | Груши | 12 |
| 13.07.2015 | Груши | 16 |

В качестве полей-групп выберем поля *Дата* и *Товар*, а поле-параметр (по которому будет проводиться агрегация) — *Вес, кг*. Для примера применим три функции агрегации: сумма, количество записей и среднее.

Результирующая таблица:

| Дата | Товар | Вес, кг (Сумма) | Вес, кг (Количество) | Вес, кг (Среднее) |
| -------- | -------- | -------- | -------- | -------- |
| 12.07.2015 | Помидоры | 24 | 1 | 24 |
| 12.07.2015 | Яблоки | 38 | 2 | 19 |
| 13.07.2015 | Груши | 28 | 2 | 14 |
| 13.07.2015 | Помидоры | 22 | 1 | 22 |

Как видно из примера, группа образуется уникальным сочетанием значений полей, выбранных в качестве группировочных.

%/spoiler%

### Вход

* ![Входной источник данных](../../images/icons/ports/input_table_inactive.svg) **Входной источник данных** — порт для подключения входного набора данных.

### Выход

* ![Выходной источник данных](../../images/icons/ports/input_table_inactive.svg) **Выходной набор данных** — порт отдающий разгруппированную таблицу.

## Мастер настройки

Окно мастера поделено на две области.

* **Доступные поля** — содержит список полей входного набора данных.
* **Выбранные поля** — делится на списки *Группа* и *Показатели*.
  * ![Группа](dataset_action_18) **Группа** — поля группировки.
  * ![Показатели](dataset_action_18) **Показатели** — поля, по которым рассчитываются функции агрегации.

Для настройки требуется переместить поля входного набора в списки *Группа* или *Показатели*, перетаскивая их мышью. Также это можно сделать при помощи кнопок перемещения.

Настройка метода агрегации для каждого показателя производится в отдельном окне. Чтобы его открыть, нужно дважды кликнуть по полю в списке *Параметры* или вызвать это окно из контекстного меню. Далее отметить галочками нужные методы. Результат для каждого метода будет записан в отдельный столбец.

[Доступные методы агрегации](../func/aggregation-functions.md)

Фильтрация над списком доступных полей позволяет найти поле по имени или его части.

Имеется возможность [Кэшировать значения измерений](../../scenario/caching.md)

При установленном  флаге  *Сортировать результирующие данные* данные в результирующей таблице будут отсортированы по полям группировки в зависимости от их последовательности расположения в списке *Группы*.
