# ![Свёртка столбцов](../../media/app/icons/component-18/component-default-05.svg) Свёртка столбцов

## Описание

Обработчик предназначен для транспонирования таблицы. При этом заголовки выбранных столбцов переносятся в значения строк, а их данные — в один столбец. Поскольку в этот столбец могут перемещаться данные разных типов, то для них используется тип данных "Переменный".

%spoiler%Пример:%spoiler%

**Исходный набор данных:**

 | Код клиента | Месяц | Кол-во SMS | Кол-во минут вх | Статус | Наличие скидки |
 | -------- | -------- | -------- |-------- | -------- | -------- |
 | 1 | август | 81 | 506 | постоянный | + |
 | 1 | сентябрь | 32 | 231 | не постоянный | - |

Выполним свертку столбцов "Кол-во SMS (целый тип)", "Кол-во минут вх (целый тип)", "Статус (строковый тип)", "Наличие скидки (логический тип)", выбрав эти столбцы траспонируемыми.

**Результирующий набор данных:**

 | Код клиента | Месяц | Имена | Метки | Значения | Типы данных |
 | -------- | -------- | -------- | -------- | -------- | -------- |
 | 1 | август | COL3 | Кол-во SMS | 81 | 4 |
 | 1 | август | COL4 | Кол-во минут вх | 506 | 4 |
 | 1 | август | COL5 | Статус | постоянный | 5 |
 | 1 | август | COL6 | Наличие скидки | True | 1 |
 | 1 | сентябрь | COL3 | Кол-во SMS | 32 | 4 |
 | 1 | сентябрь | COL4 | Кол-во минут вх | 231 | 4 |
 | 1 | сентябрь | COL5 | Статус | не постоянный | 5 |
 | 1 | сентябрь | COL6 | Наличие скидки | False | 1 |

%/spoiler%

## Вход

* ![Входной источник данных](../../media/app/icons/ports/table-inactive.svg) **Входной источник данных** (таблица данных).

## Выход

* ![Выходной набор данных](../../media/app/icons/ports/table-inactive.svg) **Выходной набор данных** (таблица данных).

## Мастер настройки

Окно мастера поделено на две области: доступные поля (слева) и выбранные поля (справа).

* **Область "Доступные поля"** содержит список полей входного набора данных;
* **Область "Выбранные поля"** делится на списки:
  * **Информационные** — содержит поля, которые не будут изменяться;
  * **Транспонируемые** — на основе этих полей будут сформированы 4 новых столбца: Имена, Метки, Значения, Типы данных.

Для настройки требуется переместить поля входного набора в списки "Информационные" или "Транспонируемые", перетаскивая их мышью. Также это можно сделать при помощи кнопок перемещения.

Результирующий набор данных содержит:

* Столбцы исходного набора данных из списка "Информационные". Их значения никак не изменяются.
* Сформированные обработчиком столбцы:
  * **Имена** — столбец с именами траспонируемых столбцов;
  * **Метки** — столбец с метками столбцов;
  * **Значения** — этот столбец содержит все значения траспонируемых столбцов, т.к. эти столбцы могут иметь разный тип (как это показано в примере), то столбец Значения имеет тип данных **переменный**.
  * **Типы данных** — столбец, содержащий информацию о типе данных значений. Типы в данном столбце обозначаются цифрами:
    * **0** — неопределенный;
    * **1** — логический;
    * **2** — дата/время;
    * **3** — вещественный;
    * **4** — целый;
    * **5** — строковый;
    * **6** — переменный.

При установке флага "Игнорировать пустые значения" обработчик не будет включать в результирующий набор строки с пустыми значениями.
