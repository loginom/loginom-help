# Создание и публикация веб-сервиса

Публикация и работа созданных в Loginom веб-сервисов доступна при наличии установленного компонента [Loginom Integrator](https://loginom.ru/platform/pricing#component-integrator).

## Реализация методов сервиса

Взаимодействие с веб-сервисом осуществляется при помощи его методов. Каждый метод веб-сервиса имеет определенный идентификатор и позволяет выполнять сопоставленное этому идентификатору действие. Как правило (но не обязательно) 
метод принимает входные данные и возвращает ответ. Действие, выполняемое методом, в Loginom реализуется публикуемым узлом сценария, а структура входных данных и ответа определяется входными и выходными портами этого узла. В качестве идентификатора метода используется строка, состоящая из имени узла и имени пакета, в котором узел содержится.

Чаще всего в качестве такого узла выступает *[Подмодель](../../processors/control/submodel.md)*, поскольку в ней пользователь имеет возможность реализовать произвольную логику и задать структуру входных и выходных данных, создавая и настраивая ее порты. Но в общем случае таким узлом может быть любой узел сценария, имеющий настройки, описанные в разделе "Настройка публикуемых узлов". В случае, если таких узлов в пакете несколько и публикуется несколько пакетов, то для каждого из таких узлов создается соответствующий ему метод сервиса.

## Настройка публикуемых узлов

Публикуемый в качестве метода веб-сервиса узел должен иметь следующие настройки:

* задан [модификатор доступа](../../scenario/access-modifier.md) `Опубликованный`;
* в окне выбора [модификатора доступа](../../scenario/access-modifier.md) задано уникальное в пределах пакета имя узла;
* узел должен быть видимым из корня сценария, т.е. в случае, если узел является вложенным (в подмодель или иерархию подмоделей), то у всех подмоделей, в которых он содержится, должен быть установлен [модификатор доступа](../../scenario/access-modifier.md) `Открытый`;
* во входных и выходных портах заданы поля/переменные, определяющие структуру запроса и ответа веб-сервиса. Это можно сделать следующими способами:
  * задать отключить автосинхронизацию портов (рекомендуется);
  * 

> **Примечание:** Параметр .

## Публикация

После того, как необходимые для публикации узлы сценария настроены, необходимо произвести публикацию пакета.

> **Примечание:** Для минимизации возможных проблем подключения к веб-сервису сторонними клиентами рекомендуется использовать в имени публикуемого пакета только символы английского алфавита, числа и символ подчеркивания.

Чтобы опубликовать пакет, в [дереве навигации](../../interface/main-menu.md#navigatsiya) необходимо кликнуть на нужном пакете правой кнопкой мыши и в контекстном меню выбрать пункт «Публикация пакетов…». Откроется окно публикации пакетов со следующими настройками:

* **Опубликованные пакеты** — список уже опубликованных пакетов.
* **Путь к файлу пакета** — указывается вручную или выбирается из выпадающего списка открытых пакетов.
* **Выбрать пространство имен**:
  * *использовать пространство имен Loginom Integrator*;
  * *генерировать уникальное для пакета*;
  * *генерировать уникальное для каждой версии пакета*;
  * *задать вручную*.

### Обновление

В случае изменения входных/выходных параметров (например, количество переменных/полей, их названия) опубликованной ранее модели, необходимо обновить публикацию. Для этого нужно:

1. сохранить пакет с измененной моделью;
2. в окне настроек «Публикация пакетов…» выбрать пакет с измененной моделью и нажать кнопку *Обновить*.

> **Важно:** После обновления опубликованной модели следует проверить соответствующие вызовы веб-сервиса и, при необходимости, внести в них изменения.

## Обращение к созданному сервису

К созданному веб-сервису можно обращаться по двум стандартам:

**SOAP** — протокол обмена структурированными сообщениями. Общение по данному протоколу осуществляется при помощи языка описания веб-сервисов WSDL, который основан на языке XML. Информацию о WSDL веб-сервиса можно получить по ссылке:

`http://<Server>/lgi/service.svc?wsdl`

**REST** — способ взаимодействия клиентских приложений и сервисов, который использует стандарты: HTTP, URL, JSON и XML. Информацию о формировании REST-запросов и ответов можно получить по ссылке:

`http://<Server>/lgi/service.svc/rest/help`
