# ![Импорт из ХД](../../images/icons/vendors/dbimport.svg)![Импорт из ХД](../../images/icons/data-sources/wh-datawarehouse-import_default.svg) Импорт из хранилища данных Импорт из хранилища данных

Компонент предназначен для импорта набора данных из [Хранилища данных](https://wiki.loginom.ru/articles/data-warehouse.html).

> **Важно:** Для работы узла требуется предварительно создать [Подключение](../connections/README.md) к *Хранилищу данных* и связать его с входным портом *Подключение*.

## Порты

### Входные порты

* ![Порт подключений](../../images/icons/ports/input_connection_inactive.svg) **Подключение** — принимает параметры подключения к хранилищу данных;
* ![Порт переменных](../../images/icons/ports/optional_input_variable_inactive.svg) **Управляющие переменные** — при необходимости [переменными](../../scenario/variables/control-variables.md) можно задать значения параметров мастера настройки (на самом деле — нельзя).

### Выходные порты

* ![Выходной порт таблицы](../../images/icons/ports/input_table_inactive.svg) **Набор данных** — Импортированные из хранилища данные.

## Мастер настройки

Позволяет настроить импорт интересуемых данных из хранилища данных.

### Шаг 1. Выбор объекта хранилища данных

* **Подключение** — отображает строку подключения к источнику данных. Не доступна для редактирования.
* **Активировать** — позволяет установить связь с хранилищем данных, если это еще не было сделано. После установления связи кнопка перестает быть активной, а название меняется на *Активировано*.
* **Объекты хранилища данных** — содержит древовидный список ![Процессы](../../images/icons/data-warehouse/fact-tables-folder_default.svg) *Процессов* и ![Измерения](../../images/icons/data-warehouse/dimensions-folder_default.svg) *Измерений* из которых необходимо выбрать лишь один объект.
* (альт.) **Объекты хранилища данных** — содержит древовидный список ![Процессы](../../images/icons/data-warehouse/fact-tables-folder_default.svg) *Процессов* и ![Измерения](../../images/icons/data-warehouse/dimensions-folder_default.svg) *Измерений* из которых необходимо выбрать лишь один объект — ![Процесс](../../images/icons/data-warehouse/fact-table_default.svg) *Процесс* или ![Измерение](../../images/icons/data-warehouse/dimension_default.svg) *Измерение*.

### Шаг 2. Импорт из хранилища данных

На данной странице происходит работа с внутренними элементами объекта, выбранного на предыдущем шаге: измерениями, атрибутами и фактами.

Окно мастера поделено на две области:

* **Доступные элементы** — левая часть, содержит список возможных для выбора элементов, соответствующих выбранному на предыдущем шаге объекту;
* **Выбранные элементы** — правая часть с уже выбранными элементами, позволяет указать интересуемые элементы из первого и задать им необходимые условия и значения.

Элемент может присутствовать только в одном списке. Между списками доступно перемещение элементов, в том числе и с помощью перетаскивания (drag&drop).

### Доступные элементы

* **Параметр** — метка параметра, при наведении курсора мыши появляется полное название метки;
* **Тип** — отображает типа элемента. Может быть ![Измерение](../../images/icons/data-warehouse/dimension_default.svg) *Измерение*, ![Факт](../../images/icons/data-warehouse/fact_default.svg) *Факт* либо ![Атрибут](../../images/icons/data-warehouse/attribute_default.svg) *Атрибут*.

Список можно отсортировать, нажав по колонке *Параметр* или *Тип*. Выделить несколько элементов можно удерживая клавишу Shift или Ctrl.

Контекстное меню:

* **Переместить в выбранные** — перемещает в список *Выбранные элементы* выделенный элемент;
* **Переместить в выбранные все** — перемещает в список *Выбранные элементы* все доступные элементы.

### Выбранные элементы

* ![Выводить](../../images/icons/data-warehouse/on_default.svg) **Выводить** — определяет будет ли добавлен этот элемент в виде поля в выходной набор данных (если отключено, то поле добавлено не будет, но по нему можно установить фильтр);
* **Поле** — тоже что и *Параметр* в *Доступных элементах*;
* **Тип** — тоже что и *Тип* в *Доступных элементах*;
* **Условие** — для *Измерений* и *Атрибутов* позволяет выбирать из выпадающего списка условие фильтрации;
* **Значение** — для *Фактов* отображает выбранные [агрегации](../../processors/func/aggregation-functions.md), для остальных элементов отображается значение фильтрации, если указано условие;
* ![Удалить](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_delete_default.svg) **Удалить** — перемещает соотвествующий параметр обратно в список *Доступные элементы*.

Если в поле *Условие* выбран вариант *в списке* или *вне списка*, то в поле *Значение* появится возможность отредактировать список. Нажав на кнопку [уточнить] (!!!иконка - многоточие - browse) откроется окно *Список значений*.

#### Список значений

> вопрос: возможно, стоит выделить в отдельную страницу, если еще не выделена?

* ![Получить список](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_get-column-list_default.svg) **Получить список** — получает список, соответствующий выбранному элементу;
* ![Выбрать все](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_check-all_default.svg) **Выбрать все** — отмечает все строки;
* ![Отменить выбор всех](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_uncheck-all_default.svg) **Отменить выбор всех** — убирает выбор всех строк;
* ![Инвертировать выбор](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_reverse-check_default.svg) **Инвертировать выбор** — меняет отмеченные и не отмеченные элементы местами;
* ![Добавить](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_plus_default.svg) **Добавить** — позволяет добавить в список новую строку;
* ![Редактировать](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_edit_default.svg) **Редактировать** — позволяет отредактировать добавленную в список строку.

Очередность элементов можно изменить:

* ![Переместить вверх](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_moveup_default.svg) **Переместить вверх** — перемещает выделенный *элемент* вверх по списку;
* ![Переместить вниз](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_movedown_default.svg) **Переместить вниз** — перемещает выделенный *элемент* вниз по списку.

Для исключения элемента из списка выбранных:

* Перетащить элемент из списка *Выбранные элементы* в *Доступные элементы*;
* Нажать на кнопку ![Удалить](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_delete_default.svg) *Удалить*.

Для очистки всего списка нажать ![Удалить все](../../images/icons/toolbar-controls_18x18/toolbar-controls_18x18_delete-all_default.svg) *Удалить все...*.

`удалить?` Контекстное меню дублирует общие функции:

* Выводить/Не выводить;
* Удалить;
* Удалить все;
* Переместить вверх;
* Переместить вниз.
